<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.131b48b25a50eff60b34.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 2.24.80"/><style data-styled="" data-styled-version="5.2.0">.bqJefh{top:0;left:0;margin:0 auto;display:block;width:100%;z-index:1000;background-color:var(--color-siteSecondaryBackground);box-shadow:0 0 0 0,0 1px 12px var(--color-wrapperSecondaryShadow);font-weight:700;}/*!sc*/
@media (min-width:700px){.bqJefh{position:fixed;}}/*!sc*/
data-styled.g2[id="Header__HeaderWrapper-sc-18x042-0"]{content:"bqJefh,"}/*!sc*/
.gVfwHS{font-weight:700;margin-left:auto;margin-right:auto;height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;z-index:1000;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;overflow-x:auto;overflow-y:hidden;white-space:nowrap;padding:0px 10px;}/*!sc*/
data-styled.g3[id="Header__HeaderNav-sc-18x042-1"]{content:"gVfwHS,"}/*!sc*/
.suqyo{display:none;-webkit-box-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (min-width:700px){.suqyo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
data-styled.g4[id="Header__HeaderLinksContainer-sc-18x042-2"]{content:"suqyo,"}/*!sc*/
.dATeuR{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--color-gray600);border:0;margin:0;padding:8px 10px;min-width:42px;z-index:10;}/*!sc*/
.Header__HeaderLink-sc-18x042-3 + .Header__HeaderLink-sc-18x042-3{margin-left:0.7rem;}/*!sc*/
data-styled.g5[id="Header__HeaderLink-sc-18x042-3"]{content:"dATeuR,"}/*!sc*/
.nFDQK{padding-left:0;}/*!sc*/
data-styled.g6[id="Header__HeaderLinkTitle-sc-18x042-4"]{content:"nFDQK,"}/*!sc*/
.fRLSja{display:block;padding-left:5px;}/*!sc*/
data-styled.g7[id="Header__HeaderLinkTitleContent-sc-18x042-5"]{content:"fRLSja,"}/*!sc*/
.bTWinv{padding:4px;height:35px;}/*!sc*/
data-styled.g8[id="Header__HeaderImage-sc-18x042-6"]{content:"bTWinv,"}/*!sc*/
.hevgWS{position:absolute;left:-999px;width:1px;height:1px;top:auto;color:var(--color-white);background-color:var(--color-grey700);}/*!sc*/
.hevgWS:focus{display:inline-block;height:auto;width:auto;position:static;padding:20px 10px;}/*!sc*/
data-styled.g10[id="Header__SkipMainContent-sc-18x042-8"]{content:"hevgWS,"}/*!sc*/
.iYLPwn{z-index:30;top:0px;position:relative;color:var(--color-white);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background:transparent;border:none;cursor:pointer;padding:8px 12px;outline:none;-webkit-tap-highlight-color:transparent;}/*!sc*/
@media (min-width:700px){.iYLPwn{display:none;}}/*!sc*/
data-styled.g12[id="Header__BurgerButton-sc-18x042-10"]{content:"iYLPwn,"}/*!sc*/
.kTPbqR{width:24px;top:30px;height:2px;background:var(--color-white);position:absolute;left:0;background:var(--color-white);-webkit-transition:all 250ms cubic-bezier(0.86,0,0.07,1);transition:all 250ms cubic-bezier(0.86,0,0.07,1);}/*!sc*/
.kTPbqR::before{content:'';top:-8px;width:24px;height:2px;background:var(--color-white);position:absolute;left:0;-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);-webkit-transition:all 250ms cubic-bezier(0.86,0,0.07,1);transition:all 250ms cubic-bezier(0.86,0,0.07,1);}/*!sc*/
.kTPbqR::after{top:8px;content:'';width:24px;height:2px;background:white;position:absolute;left:0;-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);-webkit-transition:all 250ms cubic-bezier(0.86,0,0.07,1);transition:all 250ms cubic-bezier(0.86,0,0.07,1);}/*!sc*/
data-styled.g13[id="Header__BurgerContent-sc-18x042-11"]{content:"kTPbqR,"}/*!sc*/
.eliZBG{text-align:left;padding-top:30px;padding-bottom:50px;background-color:var(--color-primary);color:var(--color-white);padding-left:20px;padding-right:20px;margin:0 auto;}/*!sc*/
.eliZBG nav{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;max-width:770px;margin:0 auto;}/*!sc*/
.eliZBG nav .footer-col{-webkit-flex:1 auto;-ms-flex:1 auto;flex:1 auto;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding-right:1em;}/*!sc*/
.eliZBG a{color:var(--color-white);font-weight:bold;}/*!sc*/
.eliZBG a:hover{color:var(--color-grey200);}/*!sc*/
.eliZBG .footer-col > p{margin:0;}/*!sc*/
.eliZBG .footer-title{font-size:0.83em;margin:0 0 1rem;}/*!sc*/
.eliZBG .footer-item{color:var(--color-white);}/*!sc*/
.eliZBG .footer-item a{padding:0.25rem 0;display:block;}/*!sc*/
.eliZBG .footer-heart{color:var(--color-red);}/*!sc*/
.eliZBG .footer-item-text{padding:0.1rem 0;color:var(--color-white);}/*!sc*/
.eliZBG .footer-header{-webkit-order:1;-ms-flex-order:1;order:1;margin:0 0.25rem;margin-right:0.25rem;padding:0.25rem;}/*!sc*/
.eliZBG .footer-column-items{grid-template-columns:1fr;display:grid;}/*!sc*/
@media (max-width:564px){.eliZBG .footer-col:first-child{width:100%;}}/*!sc*/
data-styled.g14[id="Footer__FooterWrapper-sc-1l45ifs-0"]{content:"eliZBG,"}/*!sc*/
*{box-sizing:border-box;margin:0;padding:0;}/*!sc*/
body{font-family:"Lato",sans-serif;color:var(--color-text);background-color:var(--color-siteBackground);word-break:break-all;text-align:justify;}/*!sc*/
img{max-width:100%;height:auto;vertical-align:middle;border:0;}/*!sc*/
a{-webkit-text-decoration:none;text-decoration:none;color:var(--color-text);}/*!sc*/
hr{border:0;border-top:1px solid var(--color-grey100);margin:50px 0 5px 0;}/*!sc*/
ul,ol{padding-left:2em;margin:1em 0 0 0;}/*!sc*/
ul ul,ol ol{margin:0;}/*!sc*/
.utterances{max-width:100% !important;}/*!sc*/
*::selection{background-color:var(--color-secondary);}/*!sc*/
code[class*="language-"],pre[class*="language-"]{font-size:0.9em;}/*!sc*/
data-styled.g15[id="sc-global-cAoSRP1"]{content:"sc-global-cAoSRP1,"}/*!sc*/
.kcRfas{display:inline-block;color:var(--color-textSecondary);margin:0 4px;}/*!sc*/
.kcRfas::before{content:'•';}/*!sc*/
data-styled.g18[id="Commons__Bull-nl39ol-2"]{content:"kcRfas,"}/*!sc*/
.fpUDJr{margin:0 0;}/*!sc*/
@media (min-width:700px){.fpUDJr{margin:90px 0 60px 0;}}/*!sc*/
data-styled.g19[id="layout__SiteContent-sc-16jfhip-0"]{content:"fpUDJr,"}/*!sc*/
.dUQir{position:relative;border-radius:5px;width:100%;max-width:770px;word-wrap:break-word;background-color:var(--color-wrapperBackground);margin:0px auto 30px auto;padding:50px;box-shadow:0 0 0 0,0 6px 12px var(--color-wrapperShadow);}/*!sc*/
@media (max-width:770px){.dUQir{width:100%;padding:25px;}}/*!sc*/
data-styled.g20[id="Wrapper-sc-19n2spj-0"]{content:"dUQir,"}/*!sc*/
.jdJbBp{display:inline;color:var(--color-textSecondary);}/*!sc*/
data-styled.g29[id="TagList__ListContainer-sc-8b91p3-0"]{content:"jdJbBp,"}/*!sc*/
.eXXdsI{text-transform:uppercase;color:var(--color-textSecondary);}/*!sc*/
.eXXdsI:not(:first-child){margin-left:0.3rem;}/*!sc*/
.eXXdsI:hover{border-bottom:1px dotted var(--color-textSecondary);}/*!sc*/
.eXXdsI:before{content:'#';}/*!sc*/
data-styled.g30[id="TagList__TagListItemLink-sc-8b91p3-1"]{content:"eXXdsI,"}/*!sc*/
.gkalwr{text-transform:uppercase;color:var(--color-textSecondary);}/*!sc*/
.gkalwr:not(:first-child){margin-left:0.3rem;}/*!sc*/
.gkalwr:before{content:'#';}/*!sc*/
data-styled.g31[id="TagList__TagListItem-sc-8b91p3-2"]{content:"gkalwr,"}/*!sc*/
.lctNdF{position:relative;display:table;width:100%;height:360px;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:contain;max-width:770px;margin:0 auto;}/*!sc*/
data-styled.g44[id="Hero__HeroContainer-ebqgo0-0"]{content:"lctNdF,"}/*!sc*/
.hpMEMQ{position:relative;display:table;width:100%;overflow:hidden;background-repeat:no-repeat;background-position:center;background-size:contain;max-width:770px;margin:0 auto;}/*!sc*/
data-styled.g48[id="HeroPost__HeroContainer-sc-1ro0v1y-0"]{content:"hpMEMQ,"}/*!sc*/
.jovjPV{display:table-cell;vertical-align:middle;text-align:center;width:100%;}/*!sc*/
data-styled.g49[id="HeroPost__TitleContainer-sc-1ro0v1y-1"]{content:"jovjPV,"}/*!sc*/
.bGjAQF{font-weight:700;font-size:2rem;padding-bottom:20px;border-bottom:1px solid #ececec;}/*!sc*/
data-styled.g50[id="HeroPost__HeroTitle-sc-1ro0v1y-2"]{content:"bGjAQF,"}/*!sc*/
.cpWRNq{margin:1rem 0;color:var(--color-textSecondary);font-size:0.9em;text-align:right;}/*!sc*/
data-styled.g55[id="ContentHeader__Header-hqu41n-0"]{content:"cpWRNq,"}/*!sc*/
.kpCbDA{line-height:1.6;}/*!sc*/
.kpCbDA > h1{color:var(--color-h2);padding-top:3rem;border-bottom:1px solid #ececec;font-size:2em;}/*!sc*/
.kpCbDA > h2{color:var(--color-h2);padding-top:3rem;border-bottom:1px solid #ececec;}/*!sc*/
.kpCbDA > h3{padding-top:3rem;font-size:1.3em;}/*!sc*/
.kpCbDA > h4{padding-top:3rem;font-size:1.2em;}/*!sc*/
.kpCbDA > h5{padding-top:3rem;font-size:1.1em;}/*!sc*/
.kpCbDA > h6{padding-top:3rem;font-size:1em;}/*!sc*/
.kpCbDA > p{margin:1em 0 0 0;}/*!sc*/
.kpCbDA a{fill:var(--color-text);box-shadow:0 2px 0 0 var(--color-secondary);}/*!sc*/
.kpCbDA a:hover{-webkit-filter:brightness(150%);filter:brightness(150%);box-shadow:none;}/*!sc*/
.kpCbDA a.anchor,.kpCbDA a.gatsby-resp-image-link{box-shadow:none;}/*!sc*/
.kpCbDA h1 .anchor svg,.kpCbDA h2 .anchor svg,.kpCbDA h3 .anchor svg,.kpCbDA h4 .anchor svg,.kpCbDA h5 .anchor svg,.kpCbDA h6 .anchor svg{visibility:hidden;margin-left:-16px;}/*!sc*/
.kpCbDA h1:hover .anchor svg,.kpCbDA h2:hover .anchor svg,.kpCbDA h3:hover .anchor svg,.kpCbDA h4:hover .anchor svg,.kpCbDA h5:hover .anchor svg,.kpCbDA h6:hover .anchor svg,.kpCbDA h1 .anchor:focus svg,.kpCbDA h2 .anchor:focus svg,.kpCbDA h3 .anchor:focus svg,.kpCbDA h4 .anchor:focus svg,.kpCbDA h5 .anchor:focus svg,.kpCbDA h6 .anchor:focus svg{visibility:visible;}/*!sc*/
.kpCbDA > blockquote{box-sizing:border-box;background-color:var(--color-secondaryContentBackground);border-left:5px solid var(--color-secondary);margin:30px 0px;padding:5px 20px;border-radius:0 8px 8px 0;}/*!sc*/
.kpCbDA > blockquote p{margin:0.8em 0;font-style:italic;}/*!sc*/
.kpCbDA .gatsby-highlight{border-radius:5px;font-size:15px;line-height:1.7;border-radius:10px;overflow:auto;tab-size:1.5em;margin:1.5em 0 0 0;}/*!sc*/
@media (max-width:500px){.kpCbDA .gatsby-highlight{border-radius:0;margin-left:-25px;margin-right:-25px;}}/*!sc*/
.kpCbDA .gatsby-highlight > pre{border:0;margin:0;padding:1;}/*!sc*/
.kpCbDA .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;}/*!sc*/
.kpCbDA .gatsby-highlight-code-line{background-color:var(--color-darkBlue);display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:0.75em;border-left:0.25em solid var(--color-yellow);}/*!sc*/
.kpCbDA h1 > code.language-text,.kpCbDA h2 > code.language-text,.kpCbDA h3 > code.language-text,.kpCbDA h4 > code.language-text,.kpCbDA h5 > code.language-text,.kpCbDA h6 > code.language-text,.kpCbDA a > code.language-text,.kpCbDA p > code.language-text,.kpCbDA li > code.language-text,.kpCbDA em > code.language-text,.kpCbDA strong > code.language-text{background:var(--color-lightYellow);color:black;padding:2px 6px;font-size:0.9em;border-radius:0.3rem;word-wrap:break-word;word-spacing:-3px;}/*!sc*/
.kpCbDA u{-webkit-text-decoration-style:wavy;text-decoration-style:wavy;-webkit-text-decoration-color:#ea3d3d;text-decoration-color:#ea3d3d;}/*!sc*/
.kpCbDA code{word-wrap:break-word;}/*!sc*/
.kpCbDA table{margin-top:1em;border-collapse:collapse;border-radius:0.5em;overflow:hidden;width:100%;}/*!sc*/
.kpCbDA table th,.kpCbDA table td{padding:0.5em;background-color:var(--color-secondaryContentBackground);}/*!sc*/
.kpCbDA table tr{border-bottom:2px solid var(--color-white);}/*!sc*/
.kpCbDA table tbody tr:last-child{border-bottom:none;}/*!sc*/
data-styled.g58[id="Content__ContentBody-sc-4t2sv6-0"]{content:"kpCbDA,"}/*!sc*/
.jPndFS{padding:0;}/*!sc*/
@media only screen and (max-width:500px){.jPndFS{padding:0;}}/*!sc*/
data-styled.g59[id="Article__ArticleWrapper-sem4xn-0"]{content:"jPndFS,"}/*!sc*/
.iXsfDn{text-align:center;font-size:.1em;color:#80808078;}/*!sc*/
data-styled.g61[id="Article__CoupangPartners-sem4xn-2"]{content:"iXsfDn,"}/*!sc*/
.cGdquP{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;max-width:770px;width:80%;margin:0px auto 30px auto;top:20px;position:relative;}/*!sc*/
@media (max-width:780px){.cGdquP{width:100%;padding:25px;}}/*!sc*/
data-styled.g62[id="PrevNextPost__PreviewContainer-sc-18h5ce7-0"]{content:"cGdquP,"}/*!sc*/
.ihJEoN{cursor:pointer;-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;background-color:white;box-shadow:0 0 0 0,0 6px 12px rgba(0,0,0,0.1);margin:20px 20px;border-radius:5px;}/*!sc*/
.ihJEoN:hover{box-shadow:0 0 0 0,0 6px 12px var(--color-grey300);-webkit-transition:all 0.3s ease;transition:all 0.3s ease;-webkit-transform:translate3D(0,-1px,0);-ms-transform:translate3D(0,-1px,0);transform:translate3D(0,-1px,0);}/*!sc*/
@media (min-width:780px){.ihJEoN:first-child{margin-left:0;}.ihJEoN:last-child{margin-right:0;}}/*!sc*/
data-styled.g63[id="PrevNextPost__Preview-sc-18h5ce7-1"]{content:"ihJEoN,"}/*!sc*/
.fZzXEP{width:auto;height:200px;background:#c5d2d9 no-repeat 50%;background-size:cover;border-radius:5px 5px 0 0;}/*!sc*/
data-styled.g64[id="PrevNextPost__PreviewCover-sc-18h5ce7-2"]{content:"fZzXEP,"}/*!sc*/
.ejzATW{padding:20px;}/*!sc*/
.ejzATW header{padding:0 0 10px 0;}/*!sc*/
.ejzATW section{padding-bottom:10px;}/*!sc*/
.ejzATW footer{font-size:0.8em;}/*!sc*/
data-styled.g65[id="PrevNextPost__PreviewContent-sc-18h5ce7-3"]{content:"ejzATW,"}/*!sc*/
.geNwuK{text-transform:uppercase;color:var(--color-textSecondary);}/*!sc*/
data-styled.g67[id="Commons__ReadingTimeContainer-nl39ol-3"]{content:"geNwuK,"}/*!sc*/
.kxnQnS{color:var(--color-textSecondary);}/*!sc*/
data-styled.g68[id="Time__TimeContainer-sc-1rnkboc-0"]{content:"kxnQnS,"}/*!sc*/
</style><title data-react-helmet="true">마이크로서비스 아키텍처 구축(2) - 배포와 모니터링를 거쳐 대규모 마이크로서비스 | 아웃풋 트레이닝</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Lato:400,700&amp;display=swap" rel="stylesheet"/><link data-react-helmet="true" rel="canonical" href="https://baek.dev/post/13/"/><meta data-react-helmet="true" name="description" content="마이크로서비스 아키텍처 구축의 후반부는 각각의 마이크로서비스를 같은 조직내에서 동일한 환경으로 배포 할 수 있는 방안을 찾는 것으로 시작한다. 무중단 배포로 서비스 다운타임을 없애 고객은 새로운 릴리즈가 적용되었는지 조차 모른다. 이후 배포된 서비스들을 모니터링하며 수 많은 마이크로서비스들을 아우르는 대규모 마이크로서비스에 대해 알아보자."/><meta data-react-helmet="true" property="og:url" content="https://baek.dev/post/13/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="마이크로서비스 아키텍처 구축(2) - 배포와 모니터링를 거쳐 대규모 마이크로서비스 | 아웃풋 트레이닝"/><meta data-react-helmet="true" property="og:description" content="마이크로서비스 아키텍처 구축의 후반부는 각각의 마이크로서비스를 같은 조직내에서 동일한 환경으로 배포 할 수 있는 방안을 찾는 것으로 시작한다. 무중단 배포로 서비스 다운타임을 없애 고객은 새로운 릴리즈가 적용되었는지 조차 모른다. 이후 배포된 서비스들을 모니터링하며 수 많은 마이크로서비스들을 아우르는 대규모 마이크로서비스에 대해 알아보자."/><meta data-react-helmet="true" property="og:image" content="https://baek.dev/assets/images/post/2019/2019_012.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content=""/><meta data-react-helmet="true" name="twitter:title" content="마이크로서비스 아키텍처 구축(2) - 배포와 모니터링를 거쳐 대규모 마이크로서비스 | 아웃풋 트레이닝"/><meta data-react-helmet="true" name="twitter:description" content="마이크로서비스 아키텍처 구축의 후반부는 각각의 마이크로서비스를 같은 조직내에서 동일한 환경으로 배포 할 수 있는 방안을 찾는 것으로 시작한다. 무중단 배포로 서비스 다운타임을 없애 고객은 새로운 릴리즈가 적용되었는지 조차 모른다. 이후 배포된 서비스들을 모니터링하며 수 많은 마이크로서비스들을 아우르는 대규모 마이크로서비스에 대해 알아보자."/><meta data-react-helmet="true" name="twitter:image" content="https://baek.dev/assets/images/post/2019/2019_012.jpg"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>            
              (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-6059434733081357",
                enable_page_level_ads: true
              });
          </script><link rel="icon" href="/favicon-32x32.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#222222"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=e2fe54bee9a6a02b1aac7b61c9f1ce81"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="아웃풋 트레이닝" href="/feed.xml"/><style>html { 
--color-grey100: undefined;
--color-grey200: undefined;
--color-grey300: undefined;
--color-grey400: undefined;
--color-grey500: undefined;
--color-grey600: undefined;
--color-grey700: undefined;
--color-grey800: undefined;
--color-grey900: undefined;
--color-white: undefined;
--color-yellow: undefined;
--color-lightYellow: undefined;
--color-blueGreyed: undefined;
--color-darkBlue: undefined;
--color-beige: undefined;
--color-red: undefined;
--color-sky: undefined;
--color-emerald: undefined;
--color-text: #3E4047;
--color-textSecondary: #546c77;
--color-siteBackground: #ffffff;
--color-siteSecondaryBackground: #ffffff;
--color-wrapperBackground: #ffffff;
--color-secondaryContentBackground: #f7f7f7;
--color-wrapperShadow: #0000001a;
--color-wrapperSecondaryShadow: #0000001a;
--color-primary: #3E4047;
--color-primaryAlpha: rgba(32, 35, 42, 0.85);
--color-secondary: #ffdc4e;
--color-h2: #3E4047; }</style><link as="script" rel="preload" href="/webpack-runtime-2bf8352bc6d866c679c5.js"/><link as="script" rel="preload" href="/framework-9086242092609fce62cd.js"/><link as="script" rel="preload" href="/app-ea112bb96b755fba23d4.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/2852872c-13de6bfc70108ff62994.js"/><link as="script" rel="preload" href="/3a2f1ab89072400eb78a258db61265f1964eff8a-aef7f54ab15c1714b3e4.js"/><link as="script" rel="preload" href="/6dae301c9709e8c5899acc3516b7dd8f43382179-f6f45e413d80a83ad07b.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-7fb162a244bb06c9bde9.js"/><link as="fetch" rel="preload" href="/page-data/post/13/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1956263691.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2540126770.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2749999020.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><meta name="google-site-verification" content="azlxaB7gWVOHFnwO3w2PxSyV2qA1Bzq4UFLkaZQcmxo"/><meta name="naver-site-verification" content="11ec9086ec9292ebc8dc73f6224492f208b2007b"/></head><body><script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>!function(){window.matchMedia("(prefers-color-scheme: dark)").matches,localStorage.getItem("color-mode");let e=document.documentElement;e.style.setProperty("--initial-color-mode","light"),Object.entries({grey100:"#ECECED",grey200:"#CFCFD1",grey300:"#B2B3B5",grey400:"#78797E",grey500:"#3E4047",grey600:"#383A40",grey700:"#25262B",grey800:"#1C1D20",grey900:"#131315",white:"#ffffff",yellow:"#ffdc4e",lightYellow:"#f9e892",blueGreyed:"#546c77",darkBlue:"#022a4b",beige:"#fff9d9",red:"#ff0000",sky:"#87ceeb",emerald:"#18cd8c",text:{light:"#3E4047",dark:"#ffffff"},textSecondary:{light:"#546c77",dark:"#c6d8e0"},siteBackground:{light:"#ffffff",dark:"#3E4047"},siteSecondaryBackground:{light:"#ffffff",dark:"#383A40"},wrapperBackground:{light:"#ffffff",dark:"#3E4047"},secondaryContentBackground:{light:"#f7f7f7",dark:"#3a3a3a"},wrapperShadow:{light:"#0000001a",dark:"#000"},wrapperSecondaryShadow:{light:"#0000001a",dark:"#000000000"},primary:{light:"#3E4047",dark:"#3E4047"},primaryAlpha:{light:"rgba(32, 35, 42, 0.85)",dark:"rgba(32, 35, 42, 0.85)"},secondary:{light:"#ffdc4e",dark:"#ffdc4e"},h2:{light:"#3E4047",dark:"#ffdc4e"}}).forEach(([r,f])=>{const t="--color-"+r;"object"==typeof f?e.style.setProperty(t,f.light):e.style.setProperty(t,f)})}();</script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__HeaderWrapper-sc-18x042-0 bqJefh"><nav class="Header__HeaderNav-sc-18x042-1 gVfwHS"><a href="#main-content" class="Header__SkipMainContent-sc-18x042-8 hevgWS">Skip to main content</a><a aria-label="View home page" class="Header__HeaderLink-sc-18x042-3 Header__HeaderLinkTitle-sc-18x042-4 dATeuR nFDQK" href="/"><img src="/static/e2fe54bee9a6a02b1aac7b61c9f1ce81/49ddd/logo.png" alt="아웃풋 트레이닝" class="Header__HeaderImage-sc-18x042-6 bTWinv"/><span class="Header__HeaderLinkTitleContent-sc-18x042-5 fRLSja">Training Outputs</span></a><div class="Header__HeaderLinksContainer-sc-18x042-2 suqyo"><a aria-label="View Blog page" class="Header__HeaderLink-sc-18x042-3 dATeuR" href="/">Blog</a></div><button aria-label="open menu" class="Header__BurgerButton-sc-18x042-10 iYLPwn"><div class="Header__BurgerContent-sc-18x042-11 kTPbqR"></div></button></nav></header><div class="layout__SiteContent-sc-16jfhip-0 fpUDJr"><main role="main" id="main-content" class="Wrapper-sc-19n2spj-0 dUQir"><div class="HeroPost__HeroContainer-sc-1ro0v1y-0 hpMEMQ"><div class="HeroPost__TitleContainer-sc-1ro0v1y-1 jovjPV"><h1 class="HeroPost__HeroTitle-sc-1ro0v1y-2 bGjAQF">마이크로서비스 아키텍처 구축(2) - 배포와 모니터링를 거쳐 대규모 마이크로서비스</h1></div></div><header class="ContentHeader__Header-hqu41n-0 cpWRNq"><time class="Time__TimeContainer-sc-1rnkboc-0 kxnQnS">2019-12-28 KST</time><span class="Commons__Bull-nl39ol-2 kcRfas"></span><div class="TagList__ListContainer-sc-8b91p3-0 jdJbBp"><a class="TagList__TagListItemLink-sc-8b91p3-1 eXXdsI" href="/tags/book">book</a>, <a class="TagList__TagListItemLink-sc-8b91p3-1 eXXdsI" href="/tags/msa">msa</a></div></header><div style="background-image:url(&quot;/assets/images/post/2019/2019_012.jpg&quot;)" class="Hero__HeroContainer-ebqgo0-0 lctNdF"></div><ins class="adsbygoogle" style="display:block;text-align:center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6059434733081357" data-ad-slot="5099949480"></ins><article class="Article__ArticleWrapper-sem4xn-0 jPndFS"><div style="margin:10px 0 20px 0;text-align:center"><div class="fb-like" data-href="https://baek.dev/post/13/" data-width="300" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div></div><section><div class="Content__ContentBody-sc-4t2sv6-0 kpCbDA"><h2 id="6-배포" style="position:relative"><a href="#6-%EB%B0%B0%ED%8F%AC" aria-label="6 배포 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. 배포</h2><h3 id="지속적-통합cicontinuous-integration" style="position:relative"><a href="#%EC%A7%80%EC%86%8D%EC%A0%81-%ED%86%B5%ED%95%A9cicontinuous-integration" aria-label="지속적 통합cicontinuous integration permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>지속적 통합(CI/Continuous Integration)</h3><ul><li>CI를 통한 핵심 목표는 모든 사람이 서로 동기를 맞추는 것</li><li>새롭게 체크인된 코드가 기존 코드와 적절히 통합됨을 보장함으로 달성할 수 있음</li><li>CI 서버는 아래에 대한 검증을 함<ul><li>코드의 커밋을 감지</li><li>체크아웃</li><li>코드의 컴파일과 테스트 통과를 확인</li></ul></li></ul><h4 id="ci-장점" style="position:relative"><a href="#ci-%EC%9E%A5%EC%A0%90" aria-label="ci 장점 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CI 장점</h4><ul><li>코드 품질에 대해 어느 정도 바른 피드백을 얻을 수 있음</li><li>바이너리 산출물을 자동으로 생성<ul><li>산출물의 빌드를 위한 모든 코드는 버전 관리 되므로 필요할 때 언제든지 다시 만들 수 있음</li><li>배포된 산출물의 코드를 찾을 수 있는 정도로 추적할 수 있음</li><li>CI 도구 자체의 기능에 따라 코드와 산출물에 대해 어떤 테스트가 수행되었는지 확인 가능</li></ul></li></ul><h4 id="제즈-험블의-3가지-질문" style="position:relative"><a href="#%EC%A0%9C%EC%A6%88-%ED%97%98%EB%B8%94%EC%9D%98-3%EA%B0%80%EC%A7%80-%EC%A7%88%EB%AC%B8" aria-label="제즈 험블의 3가지 질문 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>제즈 험블의 3가지 질문</h4><ul><li>Q. 하루에 한번 메인 브랜치에 체크인하는가?<ul><li>나의 코드는 물론 다른 사람들이 변경한 코드 또한 자주 확인하지 않는다면 향후의 통합이 더 어려워짐.</li><li>내 피처 개발을 위해 별도의 브랜치를 사용하고 있더라도 가능한 한 자주 메인 브랜치에 통합 해야 함</li></ul></li><li>Q. 변경을 확인할 테스트 집합이 있는가?<ul><li>테스트를 하지 않는다면 통합해서 작동하는지 구문상으로만 알 수 있으며, 시스템의 동작을 중단시키는 것까지는 알 수 없음</li><li>코드가 기대한 대로 동작하는지 검증하지 않는 CI는 CI가 아님</li></ul></li><li>Q. 빌드가 깨졌을 때 팀이 그것을 최우선으로 해결하는가?<ul><li>녹색 빌드는 변경한 것이 안전하게 통합되었고, 적색 빌드는 마지막 변경이 통합되지 않았음을 의미</li><li>우리는 빌드 문제의 해결과 관련 없는 추가적인 체크인을 중단해야 한다. 변경이 많이 적체되면 그 빌드를 해결할 시간이 급격히 늘어남</li><li>필자는 수일 동안 필드가 깨어진 채로 방치한 티과 함께 작업했었는데, 결국 빌드를 통화하는 데 엄청난 노력이 듬</li></ul></li></ul><blockquote><p><code class="language-text">CI는 빠르고 신속한 변경을 위한 핵심적인 실천 사항</code>  </p><ul><li>CI 없이는 마이크로서비스를 향한 여정이 고통스러울 것  </li><li>CI 도구의 사용과 CI의 실천을 혼동하지 말 것  </li><li>CI 도구는 단지 이러한 접근을 가능하게 할 뿐</li></ul></blockquote><h4 id="ci를-마이크로서비스와-매핑하기" style="position:relative"><a href="#ci%EB%A5%BC-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4%EC%99%80-%EB%A7%A4%ED%95%91%ED%95%98%EA%B8%B0" aria-label="ci를 마이크로서비스와 매핑하기 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CI를 마이크로서비스와 매핑하기</h4><ul><li>마이크로서비스당 하나의 CI 빌드 구성<ul><li>실환경에 배포하기 전에 신속히 변경하고 확인하기 위함</li></ul></li><li>각 마이크로서비스는 각자의 CI 빌드에 매핑된 각각의 소스 코드 저장소를 가짐<ul><li>팀의 소유권도 훨씬 명확히 정리됨으로써 서비스의 소유는 저장소와 빌드도 책임지는 것을 의미</li></ul></li><li>테스트는 마이크로서비스 소스 코드가 있는 소스 컨트롤 시스템에 있어야 함<ul><li>특정 마이크로서비스에 대해 어떤 테스트가 수행되어야 하는지 언제든지 알 수 있어야 함</li></ul></li><li><a href="/til#서비스와-호스트-매핑" target="_blank">호스트와 서비스 매핑 관계</a></li></ul><h4 id="on-demand-computing-platform주문형-컴퓨팅-플랫폼" style="position:relative"><a href="#on-demand-computing-platform%EC%A3%BC%EB%AC%B8%ED%98%95-%EC%BB%B4%ED%93%A8%ED%8C%85-%ED%94%8C%EB%9E%AB%ED%8F%BC" aria-label="on demand computing platform주문형 컴퓨팅 플랫폼 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>On-demand computing platform/주문형 컴퓨팅 플랫폼</h4><ul><li>컴퓨팅 자원의 비용을 대폭 낮춤</li><li>가상화 기술의 향상으로 조직 내 호스팅된 인프라스트럭처에 대해 더 많은 유연성 제공</li><li>시스템이 제로-다운타임을 허용하지 않는다면 실환경에 배포 시 다운타임이 늘어날 수 있음<ul><li>7장에서는 green/blue 배포와 같은 모델은 구버전의 서비스를 오프라인하지 않고도 신버전의 서비스를 배포할 수 있게 하면서 이러한 불편을 완화</li></ul></li><li>이 기동 시간(spin-up time)을 줄이기 위한 한 가지 방법은 <code class="language-text">공통적으로 의존하는 것들을 주입한 가상 머신 이미지를 만드는 것</code></li></ul><blockquote><p>AWS EC2 Instance를 프로비전하고 그 안에서 LXCs<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> 실행<br/>
<!-- -->매우 유연한 EC2의 형태로 대표되는 on-demand computing platform과<br/>
<!-- -->그 위에서 빠르게 실행되는 컨테이너의 조합</p></blockquote><ul><li><a href="http://127.0.0.1:4000/til#virtual-platform">Virtual Platform - Docker, Kubernetes</a></li></ul><h2 id="7-테스팅" style="position:relative"><a href="#7-%ED%85%8C%EC%8A%A4%ED%8C%85" aria-label="7 테스팅 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. 테스팅</h2><h3 id="unit-test" style="position:relative"><a href="#unit-test" aria-label="unit test permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unit Test</h3><ul><li>일반적으로 단일 함수 또는 메서드 호출을 테스트하는 것</li><li><strong>기능의 정상 동작 유무에 대한 매우 빠른 피드백</strong></li><li>코드를 재구성하게 해주며, 작은 범위의 테스트들이 실수를 잡아주기 때문에 코드의 리팩토링을 지원하는 데 있어 중요</li><li>문제를 신속히 발견하고 해결하기 위해 테스트를 더욱 격리하기 위함</li><li>격리를 위해 모든 외부 협업자를 스텁으로 만들어 오직 서비스 자체의 범위만으로 제한</li></ul><h3 id="테스트-작성-전담-팀은-재앙" style="position:relative"><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%9E%91%EC%84%B1-%EC%A0%84%EB%8B%B4-%ED%8C%80%EC%9D%80-%EC%9E%AC%EC%95%99" aria-label="테스트 작성 전담 팀은 재앙 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>테스트 작성 전담 팀은 재앙</h3><ul><li>소프트웨어를 개발하는 팀은 그들의 코드에 대한 테스트와 점차 멀어짐</li><li>서비스 소유자들은 방금 개발한 기능의 E2E 테스트를 테스트 팀이 작성할 때까지 기다려야 하므로 사이클이 길어짐</li><li>다른 팀에 이 테스트를 작성하기 때문에 서비스를 개발했던 팀은 덜 참여하게 되고 이들은 테스트를 어떻게 고치는지 모르기 쉬움</li></ul><h3 id="greenblue-deployment" style="position:relative"><a href="#greenblue-deployment" aria-label="greenblue deployment permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Green/Blue Deployment</h3><p><img src="/assets/images/post/2019/2019_013_004.jpg" alt="배포를 릴리스와 분리하기 위해 청색/녹색 배포 사용하기"/></p><ul><li>동시에 배포된 신/구 버전의 소프트웨어중에서 한 버전만 실제 요청을 처리</li><li>실환경 트래픽을 다른 호스트(또는 호스트의 집합)로 향하게 할 수 있어야 함<ul><li>부하 분산 설정(load-balancing configuration)을 변경하는 식으로 가능</li></ul></li><li>한 번에 두 버전의 마이크로서비스를 프로비저닝할 수 있어야 함<ul><li>탄력적인 클라우드 제공자(elastic cloud provider)를 사용하면 간단한 일</li></ul></li><li>배포의 위험을 낮출 뿐만 아니라 문제가 발생했을 때 롤백이 빠르게 가능함</li><li>전체 프로세스가 사람의 개입이 전혀 없이도 모든 전개와 복귀가 자동화될 수 있음</li><li>무중단 배포(zero downtime deployment)<ul><li>릴리즈 작업을 수행하는 동안 과거 버전을 유지함으로써 시스템의 정지 시간을 크게 낮출 수 있음</li></ul></li></ul><h3 id="canary-release" style="position:relative"><a href="#canary-release" aria-label="canary release permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Canary Release</h3><ul><li>카나리 릴리스를 했을 때 시스템이 예상대로 수행하는지 보기 위해 실환경 트래픽을 유입시켜 새롭게 배포된 소프트웨어를 검증</li><li>새 릴리스가 잘못되었다면 신속히 되돌려야 함</li><li>새 릴리스가 정상이라면 늘어나는 트래픽이 새 버전에 유입되도록 해야함</li><li><em>카나리 릴리스는 버전들이 더 오래 공존시킬 수 있고 트래픽의 양을 자주 변경할 수 있다는 점에서 green/blue release와 차이가 있음</em></li><li><strong>장점</strong><ul><li>나쁜 릴리스의 출시 위험을 관리할 도구를 제공하며</li><li>실제 트래픽으로 새 버전의 소프트웨어를 검증할 수 있게 함</li></ul></li><li><strong>단점</strong><ul><li>하지만 green/blue release 배포보다 복잡한 설정과 약간의 사고를 더 필요로 함</li><li>서로 다른 버전의 서비스가 green/blue release보다 더 오랜 기간 공존할 것이 예상되므로 이전보다 더 많은 하드웨어를 점유할 수 있음</li><li>새로운 릴리스의 동작을 확신하기 위해 트래픽 비율을 조정해야 하기 때문에 더 정교한 트래픽 라우팅도 필요</li><li>하지만 이미 green/blue release를 다루고 있다면 필요한 구성 요소 일부는 이미 갖춘 셈</li></ul></li><li>넷플릭스 사례<ul><li>릴리스에 앞서 실환경과 동일한 버전을 표현하는 기반 클러스터에 새로운 서비스 버전이 함 께 배포</li><li>그 다음에 수 시간 동안 새 버전과 기반버전 양쪽에 실환경의 부하 일부를 주면서 측정</li><li>카나리 릴리즈가 테스트를 통과하고 나면 넷플릭스는 실환경에 전체 전개를 진행</li></ul></li></ul><h3 id="mtbf--mttr" style="position:relative"><a href="#mtbf--mttr" aria-label="mtbf  mttr permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MTBF &amp; MTTR</h3><ul><li><p>MTBF/Mean Time Between Failure : 평균 무고장 시간</p></li><li><p>MTTR/Mean Time To Repair : 평균 수리 시간</p></li><li><p>복구 시간을 줄이는 기술은 청색/녹색 배포와 같은 훌륭한 모니터링과 결합되어 아주 빠른 롤백만큼 단순할 수 있음</p></li><li><p>실환경의 문제를 일찍 발견하고 롤백할 수 있다면 고객에게 적은 영향을 줄 수 있음</p></li><li><p>물론 사용자가 새 버전의 소프트웨어를 접하기 전에 그것을 배포하고 바로 테스트할 수 있는 청색/녹색 배포와 같은 기술도 사용할 수 있음</p></li><li><p>기능 테스트 집합을 생성하는 데 시간을 보내는 대부분의 조직은 대게 더 나은 모니터링이나 장애 복구에 전혀 공을 들이지 않음</p></li><li><p>그들은 처음에 발생하는 많은 결함을 줄일 수 있지만, 전부 제거하지는 못하고 실환경에서 장애가 발생할 때 처리할 충분한 준비도 하지 못함</p></li></ul><h2 id="8-모니터링" style="position:relative"><a href="#8-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81" aria-label="8 모니터링 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. 모니터링</h2><ul><li><strong>모니터링이란?</strong><ul><li>모놀리식 애플리케이션의 세계에서는<ul><li>적어도 분석을 시작할 아주 명확한 지점</li><li>단일 장애 지점(single point of failure)이 있다는</li><li>장애 분석을 다소 쉽게 만들 수 있어야 함</li></ul></li><li>단일 서버/서비스, 다수 서버/서비스 등이 만드는 모든 것을 취합하고 세부 분석</li><li>로그부터 애플리케이션 측정 지표까지 가능한 한 많은 수집과 집중식 취합</li></ul></li><li><strong>logstash</strong><ul><li>많은 로그 파일 포맷을 파싱하고 추가 분석을 위해 하부 시스템에 전송할 수 있음</li></ul></li><li><strong>Kibana</strong><ul><li>로그를 보기 위한 일레스틱서치 기반 시스템(Elastic Search-backed system)</li><li>로그 검색을 위한 질의 구문(query syntax)과 특정 날짜와 시간 범위 또는 일치하는 문자열으르 찾기 위한 정규식도 사용할 수 있음</li><li>전송된 로그에서 그래포도 생성 가능, 시간에 따라 얼마나 많은 에러가 발생했는지 한번에 보는 것이 가능</li></ul></li><li><strong>Metrics</strong><ul><li>복잡한 환경에서는 서비스들의 인스턴스가 매우 빈번히 프로비저닝되기 때문에</li><li>우리가 선택한 시스템이 새로운 호스트로부터 측정지표를 매우 쉽게 수집하기 원함</li></ul></li><li><strong>Graphite/그래파이트</strong><ul><li>평균 CPU 부하와 같이 전체 시스켐에 대해 집계된 특정 측정지표를 볼 수 있기를 기대하지만</li><li>특정 서비스에 대한 모든 인스턴스나 개별 인스턴스에 대한 측정지표까지도 집계되기 원함</li><li>이러한 구조를 추론할 수 있도록 <code class="language-text">메타데이터와 측정지표를 연결할 수 있도록 매우 쉽게 만들어주는 시스템</code></li><li>단순한 API를 제공해서 실시간으로 측정지표를 전송할 수 있고</li><li>현재 상황을 보여주는 차트나 다른 형태의 디스플레이를 생성하기 위해 그 측정지표에 대한 질의도 할 수 있음</li><li><code class="language-text">여러 표본을 취합하고 한 표본을 따라 자세히 검색함으로써 전체 시스템, 서비스 그룹 또는 단일 인스턴스에 대한 응답시간을 알 수 있음</code></li></ul></li></ul><h3 id="상관관계-id" style="position:relative"><a href="#%EC%83%81%EA%B4%80%EA%B4%80%EA%B3%84-id" aria-label="상관관계 id permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>상관관계 ID</h3><ul><li><code class="language-text">stack strace로 한 것처럼 상향 호출 체인을 추적할 수 있음</code></li><li>첫 호출이 이뤄질 때 호출에 대한 전역 호출 식별자(GUID, globally unique identifier)를 생성</li><li>후속하는 모든 호출에 전달 -&gt; 로그 레벨이나 날짜와 같은 구성 요소와 함께 구조화된 방식으로 로그에 넣을 수 있음<br/><img src="/assets/images/post/2019/2019_013_005.jpg" alt="상관관계ID가 심어진 로그"/><br/><img src="/assets/images/post/2019/2019_013_006.jpg" alt="상관관계ID 사용하기"/></li></ul><blockquote><p>하지만 처음부터 상관관계 ID가 있어야만 분석할 수 있는 문제를 접하기 전까지 상관관계 ID의 필요성을 모른다는 것!</p></blockquote><h3 id="통합-모니터링" style="position:relative"><a href="#%ED%86%B5%ED%95%A9-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81" aria-label="통합 모니터링 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>통합 모니터링</h3><ul><li>시스템간의 통합 지점 모니터링 중요</li><li>각 서비스 인스턴스는 다른 서비스에 이르기까지 하위 의존성 상태를 추적하고 노출</li><li>모니터링은 표준화가 매우 중요한 분야</li><li>많은 인터페이스를 이용하는 사용자에게 기능을 제공하기 위해 다양한 방식으로 협업하는 서비스들이 있다면<ul><li>총제적인 방식으로 시스템을 바라볼 수 있어야 함</li></ul></li><li>표준 포맷으로 로그를 출력</li></ul><h2 id="9-보안" style="position:relative"><a href="#9-%EB%B3%B4%EC%95%88" aria-label="9 보안 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9. 보안</h2><blockquote><p>인증(authentication)과 권한부여(authorization)는 시스템과 상호작용하는 인간과 사물에 있어 핵심적인 개념</p></blockquote><ul><li>보안의 맥락에서 인증은 자신이라고 말하는 당사자를 확인하는 과정</li><li>인증되는 사람 또는 사물에 대해 추상적으로 말할 때 그 대상을 principal로 언급</li><li><code class="language-text">목표는 한 번의 인증으로 모든 시스템을 이용할 수 있는 single identity를 보유하는 것</code></li></ul><h3 id="ssosingle-sign-on" style="position:relative"><a href="#ssosingle-sign-on" aria-label="ssosingle sign on permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SSO/Single Sign-On</h3><blockquote><p>예를 들어 어느 컴퓨터에 로그인한 후 그룹웨어 등의 응용 프로그램을 사용할 때에 로그인,<br/>
<!-- -->다른 서버상의 응용 프로그램을 사용할 때에도 다시 로그인이 필요한 상황이라면,<br/>
<!-- -->사용자는 여러 개의 아이디와 비밀번호를 관리해야 한다.<br/>
<strong>통합인증을 도입한 환경에서는 사용자는 하나의 아이디와 비밀번호로 모든 기능을 사용할 수 있다.</strong></p></blockquote><ul><li><p><strong>SSO 장단점</strong></p><ul><li>보안이 필요한 환경에서 통합인증을 도입하는 경우<ul><li>여러 응용 프로그램의 로그인 처리가 간소화되어 편리성을 도모할 수 있음</li></ul></li><li>하지만 최초의 로그인 대상이 되는 응용 프로그램 혹은 운영체제에 대한 접근 보안이 중요함<ul><li>보안위험이 적은 환경에서는 편리성만을 추구하면 되지만</li><li>보안이 요구되는 환경에서는 1회용 비밀번호를 이용하는 등 이중 인증 등으로 보안을 강화할 필요가 있음</li></ul></li></ul></li><li><p><strong>SAML/Security Assertion Markup Language, 샘엘</strong></p><ul><li>인증 정보 제공자(identity provider)와 서비스 제공자(service provider) 간의 인증 및 인가 데이터를 교환하기 위한 XML 기반의 개방형 표준 데이터 포맷</li><li>SOAP 기반의 표준이며 지원 가능한 라이브러리와 도구가 있음에도 불구하고 작업이 꽤 복잡</li><li><a href="https://ko.wikipedia.org/wiki/SAML">출처 - 위키백과</a></li><li><a href="http://www.itworld.co.kr/tags/70505/OAuth/108736">SAML에 대해 알아야 할 것들</a></li></ul></li><li><p><strong>openID Connect</strong></p><ul><li>openID Connect 는 openid라는 scope 값을 포함해서 Authorization Request를 보내며 Authentication에 대한 정보는 ID Token 이라고 불리는 JSON Web Token(JWT)을 리턴</li><li>OAuth 2.0의 특정 구현에서 출발한 표준</li><li>구글 및 다른 업체에서 SSO를 처리하는데 사용</li><li>더 단순한 REST 호출을 사용하고, 사용 편의성이 향상되어 기업 시장으로 진출</li></ul></li><li><p><strong>LDAP/Lightweight Directory Access Protocol</strong></p><ul><li>기업의 경우에는 흔히 회사의 디렉터리 서비스와 연결될 수 있는 자체 신원 제공자를 보유</li><li>디렉터리 서비스 LDAP, 경량 디렉터리 액세스 프로토콜</li></ul></li><li><p><strong>Okta</strong></p><ul><li>이중 요소 인증과 같은 작업을 처리하는 SAML 신원 제공자 호스팅 서비스지만,</li><li>여러분 회사의 진위 출처 디렉터리 서비스도 연결 가능</li></ul></li></ul><h3 id="세분화된-권한-부여" style="position:relative"><a href="#%EC%84%B8%EB%B6%84%ED%99%94%EB%90%9C-%EA%B6%8C%ED%95%9C-%EB%B6%80%EC%97%AC" aria-label="세분화된 권한 부여 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>세분화된 권한 부여</h3><ul><li><p>게이트웨이는 상당히 효과적인 큰 단위의 인증 기능을 제공하는 것이 가능</p></li><li><p>로그인이 안 된 사용자의 헬프데스크 애플리케이션에 대한 접근을 차단할 수 있음</p></li><li><p>특정 자원 또는 엔드포인트에 대한 접근의 허용 여부는 마이크로서비스 자체에 맡겨야 함</p><ul><li>어떤 행동의 허용 여부는 마이크로서비스가 더 많이 결정해야 할 필요가 있음</li></ul></li><li><p><strong>HTTP(S) 기본 인증</strong></p><ul><li>HTTP Basic Authentication은 클라이언트가 사용자 이름과 패스워드를 표준 HTTP헤더에 넣어서 전송<ul><li>서버는 상세 내용을 확인하고 클라이언트의 서비스 접근 허용 여부를 승인</li><li>하지만, <strong>안전한 방식으로 사용자 이름과 패스워드를 전송할 수 없으므로 문제가 많음</strong></li></ul></li><li>네트워크상의 어떠한 중간자도 헤더 정보와 데이터를 볼 수 있으므로 HTTP 기본 인증은 대개 HTTPS 상에서 수행되어야 함</li><li>HTTPS를 사용하면 클라이언트는 통신하고 서버가 자신이 생각하는 그 서버라는 확실한 보장을 받고</li><li>클라이언트와 서버 간의 트래픽을 도청하거나 페이로 조작을 막는 추가적인 보호도 받음</li></ul></li><li><p><strong>SAML 또는 OpenID Connect 사용하기</strong></p><ul><li>게이트웨이를 사용하고 있다면 네트워크 내부의 트래픽을 게이트웨이로 라우팅해야겠지만</li><li>만약 개별 서비스가 직접 서비스 간 통합을 처리한다면 이 라우팅을 기본적으로 지원해야 함</li><li>기존의 인프라스트럭처를 사용할 수 있고 모든 서비스의 접근 통제를 중앙의 디렉터리 서버에 모아서 처리할 수 있음</li><li>중간자 공격을 피하고자 한다면 여전히 HTTPS 상에서 라우팅해야 함</li></ul></li><li><p><strong>클라이언트 인증서</strong></p><ul><li>클라이언트의 신원 확인을 위한 또 다른 방법은 (SSL의 계승자인) 클라이언트 인증서 형태의 전송 계층 보안(TLS/Transport Layer Security) 기능을 이용하는 것</li><li>클라이언트와 서버의 연결을 체결할 때 사용되는 X.509 인증서가 각 클라이언트에 설치되어 있으며,</li><li>서버는 클라이언트 인증서의 진위를 검증하여 유효한 클라이언트인지 확실히 보장할 수 있음</li></ul></li><li><p><strong>HTTP 기반의 HMAC</strong></p><ul><li>HTTPS 트래픽이 서버에 부담을 줄 수 있고, HTTPS 트래픽은 캐시하기도 쉽지 않음</li><li><strong>다른 대안은 OAuth 명세서 일부와 AWS S3 API에 의해 폭넓게 사용되는 해시 기반 메시징 코드(HMAC/hash-based messaging code)를 HTTP 요청의 서명에 사용하는 것</strong></li><li><strong>HMAC 장점</strong><ul><li>HMAC에서 요청 메시지 바디는 비밀 키를 사용해서 해시되고 해시 결과는 요청과 함께 전송</li><li>서버는 자신이 가진 비밀 키의 복제본을 사용해서 해시를 재생성</li><li>1과 2가 일치한다면 서버는 그 요청을 수락</li><li>누군가 중간에 요청을 변조한다면 해시는 일치하지 않을 것이고, 서버는 그 요청이 변조되었다는 것을 알 수 있음</li><li>비밀 키는 절대 그 요청에 넣어 전송하지 않으므로 통신상에서 누출 될 수도 없음</li><li>트래픽이 더 쉽게 캐쉬되고, 경우에 따라 다르겠지만 아마도 해시를 생성하는 부하가 HTTPS 트래픽을 처리하는 것보다 더 낮다는 추가 이점</li></ul></li><li><strong>HMAC 단점</strong><ul><li>클라이언트와 서버 모두 어떤 방식으로든 통신해서 기밀을 공유해야 함<ul><li>양단간에 하드코딩할 수 있지만 기밀이 누출된다면 접근을 차단하는 데 문제가 있음</li><li>다른 대체 프로토콜을 통해 통신한다면 여러분은 그 프로토콜이 매우 안전하다는 것도 보장</li></ul></li><li>하나의 패턴이지 표준은 아니므로 다양한 구현 방법이 있음<ul><li>그 결과 이 방법에 대한 공객적이며 가용한 양질의 구현체가 부족</li></ul></li><li>제3자가 요청 내용을 조작하지 않았다는 것과 비밀 키 자체의 기밀성(전송하지 않으므로)만 보장하는 것<ul><li>요청한 데이터는 네트워크상에서 스누핑하는 사람들에게 여전히 노출</li></ul></li></ul></li></ul></li><li><p><strong>API Key</strong></p><ul><li>모든 공개 API는 API Key를 사용함</li><li>API Key를 통해 서비스는 API 호출자를 인식할 수 있고 호출자의 능력에 제한을 둘 수 있음</li><li>모두를 위한 서비스 품질을 유지하기 위해 특정 호출자에 대한 속도 제한을 할 수 있음</li><li>일부 시스템은 하나의 공유 API Key를 이용해서 앞에서 설명한 HMAC과 유사한 방식을 사용</li><li>더 일반적 방법은 공개 키와 개인키를 짝으로 사용하는 것</li><li>전형적으로 사람들의 신원을 한 곳에서 관리하듯이 키도 한 곳에서 관리하는데 이 분야에서는 흔히 <strong>게이트웨이</strong> 모델을 사용</li><li>API key 기반의 인증은 SAML 핸드셰이킹 처리와 비교하면 훨씬 더 단순하고 직관적</li></ul></li></ul><h3 id="네트워크-분리망분리" style="position:relative"><a href="#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EB%B6%84%EB%A6%AC%EB%A7%9D%EB%B6%84%EB%A6%AC" aria-label="네트워크 분리망분리 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>네트워크 분리(망분리)</h3><ul><li>마이크로서비스에서는 서비스들의 상호 통신 방법의 통제를 세분화하도록 서비스들을 다른 네트워크 세그먼트에 배치할 수 있음</li><li>AWS는 가상 사설 클라우드(Virtual Private Cloud/VPC)를 자동적으로 프로비저닝하는 기능을 제공</li></ul><p><img src="/assets/images/post/2019/2019_013_008.jpg" alt="불행히도 안전하지 못한 뮤직코퍼레이션 아키텍처의 서브넷"/>
<img src="/assets/images/post/2019/2019_013_009.jpg" alt="더 안전한 뮤직코페이션 시스템"/></p><h2 id="10-콘웨이의-법칙과-시스템-설계" style="position:relative"><a href="#10-%EC%BD%98%EC%9B%A8%EC%9D%B4%EC%9D%98-%EB%B2%95%EC%B9%99%EA%B3%BC-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EA%B3%84" aria-label="10 콘웨이의 법칙과 시스템 설계 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>10. 콘웨이의 법칙과 시스템 설계</h2><h3 id="two-pizza-team-법칙" style="position:relative"><a href="#two-pizza-team-%EB%B2%95%EC%B9%99" aria-label="two pizza team 법칙 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>two-pizza team 법칙</h3><ul><li>팀의 규모가 피자 두판으로 식사를 마칠 수 없는 규모가 돼서는 안 된다</li><li>넷플릭스는 아마존의 사례를 교훈삼아 처음부터 작고 독립적인 팀을 조직했고</li><li>그 결과 독립적인 팀을 조직, 독립적인 서비스를 만들 수 있었음</li><li>변경 속도에 최적화된 시스템 아키텍처를 확보할 수 있었음</li></ul><h3 id="공유-서비스의-추진" style="position:relative"><a href="#%EA%B3%B5%EC%9C%A0-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%9D%98-%EC%B6%94%EC%A7%84" aria-label="공유 서비스의 추진 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>공유 서비스의 추진</h3><ul><li>소유권은 요구사항의 발굴에서부터 애플리케이션이 빌드, 배포, 유지보수에 이르는 모든 측면까지 확장</li><li>마이크로서비스에서 더 만연한 모델로, 작은 팀이 작은 서비스를 소유하기 더 용이</li><li>소유권 확대는 자율성 향상과 빠른 출시로 이어짐</li><li>애플리케이션의 배포와 유지보수까지 한 팀이 책임지게 하면 그 보상으로 배포하기 쉬운 서비스가 만들어짐</li></ul><h3 id="방치된-서비스" style="position:relative"><a href="#%EB%B0%A9%EC%B9%98%EB%90%9C-%EC%84%9C%EB%B9%84%EC%8A%A4" aria-label="방치된 서비스 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>방치된 서비스</h3><ul><li>내부 오픈 소스 모델을 훌륭히 지원하기 위해 여러분은 몇 가지 도구가 필요</li><li>pull 요청 또는 이와 유사한 기능을 가진 분산 버전 관리 도구는 필수</li><li>탑재한 코드 리뷰 시스템이거나 아닐 수도 있지만 패치에 대한 인라인 코멘트는 매우 유용한 기능</li><li>우리는 경계가 있는 콘텍스트 주위로 서비스의 경계선을 긋는다</li></ul><blockquote><p>다양한 기술 스택을 사용하는 폴리글랏 방식(polyglot approach)을 적용한 경우<br/>
<!-- -->여러분 팀이 더 이상 그 기술 스택을 모른다면 방치된 서비스를(orphaned service) 변경하는 것은<br/>
<!-- -->심각한 문제가 될 수 있음</p></blockquote><h2 id="11-대규모-마이크로서비스" style="position:relative"><a href="#11-%EB%8C%80%EA%B7%9C%EB%AA%A8-%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4" aria-label="11 대규모 마이크로서비스 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>11. 대규모 마이크로서비스</h2><blockquote><p><strong>분산 컴퓨팅의 오류</strong><br/>
<!-- -->분산 컴퓨팅에서 아키텍트나 설계자가 범하기 쉬운 7가지 가정을 소개했고,<br/>
<!-- -->그 후 제임스 고슬링이 다른 오류를 추가해서 분산 컴퓨팅의 8가지 오류로 알려짐</p></blockquote><blockquote><p>어떤 것이든 고장날 수 있다는 가정을 명심하는 것은 문제의 해결 방법을 다르게 생각하도록 만든다</p></blockquote><h3 id="antifragile" style="position:relative"><a href="#antifragile" aria-label="antifragile permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AntiFragile</h3><ul><li><p>넷플릭스는 안티프래질 조직의 개념을 형성</p></li><li><p>넷플릭스가 전적으로 AWS 인프라스트럭처에 기반한다는 사실</p></li><li><p>이 두 요소는 장애를 잘 수용해야 한다는 것을 의미, 장애를 일부러 유발</p></li><li><p>구글은 매년 장애 복구 테스트(Disaster Recovery Test, DiRT) 훈련</p></li><li><p><strong>Chaos Monkey</strong></p><ul><li>하루 중 특정 시간 동안 임의로 머신의 전원을 꺼버림</li><li>실운영 환경에서 이런 사고의 발생 가능성을 인지하는 것은 시스템을 만드는 개발자들이 실제로 그 사고에 준비하게 만듬</li><li>넷플릭스의 장애를 만드는 봇인 유인원 부대의 일부</li></ul></li><li><p><strong>Chaos Gorilla</strong></p><ul><li>전체 가용성 센터(AWS의 데이터 센터에 해당되는)를 검토하는 데 사용</li></ul></li><li><p><strong>Latency Monkey</strong></p><ul><li>머신 간의 느린 네트워크 접속 상황을 시뮬레이션 함</li></ul></li><li><p><strong>Timeout</strong></p><ul><li>모든 프로세스 경계 외부의 호출에 타임아웃을 넣고 항상 기본 타임아웃 시간을 설정할 것</li><li>타임아웃 발생 시간을 로깅하고 어떤 일이 발생했는지 살펴보며 타임아웃을 적절히 변경할 것</li></ul></li></ul><h3 id="하위-시스템이-실제로-다운될-때까지-얼마나-오래-기다릴-수-있을까" style="position:relative"><a href="#%ED%95%98%EC%9C%84-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%B4-%EC%8B%A4%EC%A0%9C%EB%A1%9C-%EB%8B%A4%EC%9A%B4%EB%90%A0-%EB%95%8C%EA%B9%8C%EC%A7%80-%EC%96%BC%EB%A7%88%EB%82%98-%EC%98%A4%EB%9E%98-%EA%B8%B0%EB%8B%A4%EB%A6%B4-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C" aria-label="하위 시스템이 실제로 다운될 때까지 얼마나 오래 기다릴 수 있을까 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>하위 시스템이 실제로 다운될 때까지 얼마나 오래 기다릴 수 있을까?</h3><ul><li>호출이 실패했다고 판단하는데 너무 오래 걸리면 전체 시스템이 느려질 수 있음</li><li>혹은 너무 빨리 타임아웃하면 동작했을지도 모르는 호출을 실패로 고려할 것</li></ul><h3 id="circuit-breaker" style="position:relative"><a href="#circuit-breaker" aria-label="circuit breaker permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Circuit Breaker</h3><p><img src="/assets/images/post/2019/2019_013_010.jpg" alt="Circuit Breaker"/></p><ul><li>가정마다 전련 급등으로부터 가전 기기를 보호하기 위한 회로 차단기(Circuit Breaker)</li><li>회로 차단기의 구현 방법은 실패한 요청의 의미에 따라 다름</li><li>HTTP 커넥션을 위한 차단기를 구현할 때는 타임아웃이나 5XX HTTP 응답 코드에 해당되는 호출 실패를 설정</li><li><code class="language-text">하위 자원이 다운되거나 타임아웃되거나 에러를 리턴할 때 특정 임계값에 도달 한 후 자동적으로 전송 트래픽을 중지시키고 신속히 실패하도록 만듬</code></li><li>정상으로 복구되었을 때 자동으로 재시작할 수 있음</li><li><strong>회로 차단기가 끊어진 동안 할 수 있는 옵션</strong><ul><li>요청을 큐에 넣어두고 나중에 처리하는 것<ul><li>비동기 작업의 일부로 작업을 수행한다면 효과적</li></ul></li><li>호출이 동기 체인의 일부분으로 수행되는 경우에는 빨리 실패하는 것이 더 나음</li></ul></li></ul><h3 id="격벽" style="position:relative"><a href="#%EA%B2%A9%EB%B2%BD" aria-label="격벽 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>격벽</h3><ul><li>소프트웨어 아키텍처 측면에서 고려할 수 있는 다양한 격벽이 있음</li><li>각각의 하위 커넥션마다 다른 커넥션 풀을 사용해야 한다</li><li>이것은 특정 하위 서비스가 느려지게 되더라도 그 서비스의 커넥션 풀에서만 영향을 받고 다른 호출은 정상 처리되는 것을 보장</li><li><strong>우려되는 것을 분리하는 것도 격벽의 한 방법</strong></li><li>얽혀 있는 기능을 분리된 마이크로서비스로 분해함으로써 한 지역의 장애가 다른 지역에 영향을 줄 가능성을 줄임<br/><img src="/assets/images/post/2019/2019_013_011.jpg" alt="상관관계ID가 심어진 로그"/></li></ul><h3 id="ssl-termination" style="position:relative"><a href="#ssl-termination" aria-label="ssl termination permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SSL termination</h3><ul><li>분산기로 유입되는 HTTPS 커넥션을 HTTP 커넥션으로 변환해서 인스턴스에 전달</li><li>과거에는 SSL을 관리하는 부하가 상당히 높아 이 변환 과정을 처리하는 부하 분산기<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>를 두는 것이 매우 유용했으나,</li><li>요즘 이런 일은 인스턴스가 동작하는 개별 호스트를 셋업하는 것만큼 단순함</li><li>HTTPS를 사용하는 것은 요청이 중간자 공격에 취약하지 않게 만들기 위한 것이므로,</li><li>SSL 종단 기능을 사용하면 우리 자신을 잠재적으로 어느 정도 노출하는 것</li><li>Virtual Local Area Network 안에 모든 마이크로서비스 인스턴스를 두는 것</li></ul><h3 id="elb--elastic-load-balancer" style="position:relative"><a href="#elb--elastic-load-balancer" aria-label="elb  elastic load balancer permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ELB / Elastic Load Balancer</h3><ul><li>AWS는 HTTPS 종단 기능이 있는 부하 분산기를 ELB형태로 제공</li><li>VLAN<sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup>을 구현하기 위해 AWS 보안 그룹이나 가상 사설 클라우드 (VPC/Virtual Private Cloud)를 사용</li></ul><h3 id="데이터-확장" style="position:relative"><a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%99%95%EC%9E%A5" aria-label="데이터 확장 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>데이터 확장</h3><ul><li><p><strong>Standby Replica Database</strong></p><ul><li>마스터 데이터베이스에 저장된 모든 데이터가 대기 복제 데이터베이스에 복사됨</li><li>마스터 DB가 다운될 경우 데이터는 안전하지만,</li><li>그렇더라도 마스터 DB를 백업으로 바꾸거나 레플리카를 마스터DB로 승격시키는 매커니즘 없이는 DB가용성을 얻을 수 없음</li><li><img src="/assets/images/post/2019/2019_013_012.jpg" alt="Replica"/></li></ul></li><li><p><strong>쓰기용 확장 - Sharding</strong></p><ul><li>샤딩을 통해 많은 DB Node를 가질 수 있음</li><li>저장할 데이터의 일부를 가지고 해싱 함수를 통해 데이터의 키를 생성하며 해싱 함수의 결과인 그 키를 사용해서 저장할 장소를 얻음</li></ul></li><li><p><strong>MongoDB - Map/Reduce</strong></p><ul><li>모든 샤드에 질의하고 싶다면 각각의 샤드에 질의하고 메모리에서 조인하거나 여러 데이터셋이 있는 다른 읽기 전용 저장소가 필요</li><li>여러 샤드에 대한 잦은 질의는 캐시 결과를 사용해서 비동기적 매커니즘으로 처리</li></ul></li><li><p><strong>Casandra</strong></p><ul><li>백그라운드에서 데이터의 재조정을 수행하면서 라이브 시스템에 샤드 추가를 지원</li><li>기존 클러스트에 샤드를 추가하는 것은 심약한 사람에게 맞지 않으므로 철저한 테스트를 잊지 말라</li></ul></li></ul><h3 id="caching" style="position:relative"><a href="#caching" aria-label="caching permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caching</h3><ul><li><p>연산의 이전 결과를 저장해서 연속된 요청은 재연산을 위한 시간과 자원의 소비 없이 저장되어 있는 값 사용 가능</p></li><li><p>대개 캐싱은 결과를 더 빠르게 제공하기 위해 DB나 다른 서비스까지의 불필요한 왕복을 제거</p></li><li><p><strong>Client side Caching</strong></p><ul><li>클라이언트가 새로운 복사본을 가져올 시점과 여부를 결정</li><li>하위 서비스가 힌트를 제공하며 클라이언트는 그 응답을 통해 해야 할 것을 이해하고 새로운 요청의 시점과 여부를 알 수 있음<ul><li>네트워크 호출을 대폭 줄임</li><li>서버의 하위 서비스에 대한 부하를 줄일 수 있는 가장 빠른 방법</li></ul></li></ul></li><li><p><strong>Proxy Caching</strong></p><ul><li>클라이언트와 서버 사이에 프로식스를 배치하는 것<ul><li>Reversed Proxy<ul><li>스퀴드, 바니시처럼 모든 HTTP Traffic을 캐시</li></ul></li><li>CDN / Content Delivery Network</li></ul></li><li>클라이언트와 서버에 독립적</li><li>기존 시스템에 캐싱을 추가하는 가장 간단한 방법</li></ul></li><li><p><strong>Server side Caching</strong></p><ul><li>Redis</li><li>Memcached</li><li>In-memory Cache</li></ul></li></ul><h2 id="-words" style="position:relative"><a href="#-words" aria-label=" words permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>+ Words</h2><ul><li><p><strong>snooping</strong></p><ul><li>네트워크상의 정보를 획득하는 일련의 행위를 의미</li><li>sniffing도 유사한 의미를 가지지만 주로 염탐하는 행위를 뜻함</li></ul></li><li><p><strong>PaaS/Platform as a Service</strong></p><ul><li>서비스로서의 플랫폼, 대표적으로 Heroku</li><li>Heroku는 서비스의 실행을 처리할 뿐만 아니라 아주 단순한 방식으로 데이터베이스와 같은 서비스도 지원</li><li>애플리케이션의 용도를 기반으로 autoscale을 시도하려는 PasS를 많이 사용했었지만 그 결과는 좋지 않았음</li></ul></li><li><p><strong>cascading failure/장애 전파</strong></p><ul><li>처음에 한 파트에서 발생한 장애가 연속하는 다른 파트에 장애를 촉발시키는 것</li><li>상호 연결된 파트의 시스템에서 발생 할 수 있음</li><li>이와 같은 장애는 전력 송출, 컴퓨터 네트워킹, 금융, 인체 시스템과 같은 다양한 종류의 시스템에서 발생 가능</li></ul></li><li><p><strong>Netflix’s Hystrix</strong></p><ul><li>지연시간 및 장애 내성 로직을 추가하여 분산 환경 서비스들 간의 상호작용을 통제하는 라이브러리</li><li>서비스 사이의 포인트를 격리하고 전파 장애를 막아 시스템의 회복력을 향상시킴</li></ul></li><li><p><strong>Netflix’s Suro</strong></p><ul><li>넷플릭스의 데이터 파이프라인 플랫폼</li><li>사용자 행위의 데이터와 애플리케이션 로그처럼 보다 시스템 운영적인 데이터와 연관된 두 지표 모두를 처리하는 분명한 용도</li><li>Apache Chukwa를 기반으로 자사의 분산된 애플리케이션 서버에서 쏟아지는 엄청난 데이터를 수집해서</li><li>S3나 하둡 파일 시스템 같은 저장소에 저장하여 실시간 분석을 도와주는 오픈 소스 플랫폼</li></ul></li><li><p><strong>멱등성</strong></p><ul><li>연산이 연속적으로 여러 번 적용되더라도 첫 적용 후의 결과가 달라지지 않는 성질의 연산</li></ul></li><li><p><strong>Swagger</strong></p><ul><li>스웨거를 사용할 경우 API를 잘 기술하면 웹 브라우저를 통해 API 문서를 볼 수 있고 API와 상호 작용할 수 있는 웹 UI를 생성할 수 있음</li></ul></li></ul><div class="footnotes"><hr/><ol><li id="fn-1">LXC/Linux Container : 분리된 가상의 호스트를 구분하고 통제하기 위해 프로세스들을 위한 분리된 프로세스 공간을 생성 <a href="/til#linux" taget="_blank">&gt;<!-- -->자세히 보기</a><a href="#fnref-1" class="footnote-backref">↩</a></li><li id="fn-2">부하 분산. 부하 분산기 뒤에 마이크로서비스 인스턴스가 실행되는 여러 호스트를 배치하는 것으로 고용량 고비용의 하드웨어 장비에서 모드 프로식와 같은 소프트웨어 기반의 것까지 그 형태와 크기가 다양<a href="#fnref-2" class="footnote-backref">↩</a></li><li id="fn-3">VLAN. 가상 지역 네트워크로 외부와 격리되어 있어 외부의 요청은 라우터를 통해서만 유입된다. 이 경우에는 라우터가 SSL을 종단하는 부하 분산기가 되며 VLAN 외부의 커뮤니케이션은 HTTPS로 하지만 내부에서는 모두 HTTP를 사용.<a href="#fnref-3" class="footnote-backref">↩</a></li></ol></div></div></section><br/><br/><div style="margin:10px 0 20px 0;text-align:center"><div class="fb-like" data-href="https://baek.dev/post/13/" data-width="300" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="true"></div></div><div class="Article__CoupangPartners-sem4xn-2 iXsfDn">쿠팡 파트너스 활동을 통해 일정액의 커미션을 제공받을 수 있습니다.</div></article><ins class="adsbygoogle" style="display:block;text-align:center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-6059434733081357" data-ad-slot="5099949480"></ins></main><aside class="Wrapper-sc-19n2spj-0 dUQir"><section><div class="container comments"><div class="utterances"></div></div></section></aside><aside class="PrevNextPost__PreviewContainer-sc-18h5ce7-0 cGdquP"><article class="PrevNextPost__Preview-sc-18h5ce7-1 ihJEoN"><a aria-label="View 마이크로서비스 아키텍처 구축(1) - MSA를 지탱하는 기본 개념 article" href="/post/12/"><div style="background-image:url(&quot;/assets/images/post/2019/2019_012.jpg&quot;)" class="PrevNextPost__PreviewCover-sc-18h5ce7-2 fZzXEP"></div><div class="PrevNextPost__PreviewContent-sc-18h5ce7-3 ejzATW"><header><h3>마이크로서비스 아키텍처 구축(1) - MSA를 지탱하는 기본 개념</h3></header><section style="font-size:0.9rem;line-height:1.4em"><p>마이크로서비스 아키텍처 구축의 전반부는 MSA를 지탱하는 기본 개념과 어떻게 모놀리스로 부터 MSA로의 전환을 시작 할 수 있을지 알아보자.</p></section><footer style="font-size:0.7rem"><span class="Commons__ReadingTimeContainer-nl39ol-3 geNwuK">10<!-- --> min read</span><span class="Commons__Bull-nl39ol-2 kcRfas"></span><div class="TagList__ListContainer-sc-8b91p3-0 jdJbBp"><span to="/tags/book" class="TagList__TagListItem-sc-8b91p3-2 gkalwr">book</span>, <span to="/tags/msa" class="TagList__TagListItem-sc-8b91p3-2 gkalwr">msa</span></div></footer></div></a></article><article class="PrevNextPost__Preview-sc-18h5ce7-1 ihJEoN"><a aria-label="View 2019년 회고 - 처음 쓰는 한해 마무리 회고 article" href="/post/14/"><div style="background-image:url(&quot;/assets/images/post/2019/2019_014.png&quot;)" class="PrevNextPost__PreviewCover-sc-18h5ce7-2 fZzXEP"></div><div class="PrevNextPost__PreviewContent-sc-18h5ce7-3 ejzATW"><header><h3>2019년 회고 - 처음 쓰는 한해 마무리 회고</h3></header><section style="font-size:0.9rem;line-height:1.4em"><p>2~3년 전부터 작성하고 싶었던 한해 마무리 회고를 드디어 처음으로 작성한다. 매년 바쁘고 글감이 부족하단 이유로 흐지부지되었는데, 얼마 전 잠실 모각코 송년회 모임을 하면서 한해 회고를 가볍게 진행했다. 이때 작성한 회고를 좀 더 발전시켜 첫 회고 포스팅을 시작한다.</p></section><footer style="font-size:0.7rem"><span class="Commons__ReadingTimeContainer-nl39ol-3 geNwuK">6<!-- --> min read</span><span class="Commons__Bull-nl39ol-2 kcRfas"></span><div class="TagList__ListContainer-sc-8b91p3-0 jdJbBp"><span to="/tags/retrospective" class="TagList__TagListItem-sc-8b91p3-2 gkalwr">retrospective</span>, <span to="/tags/diary" class="TagList__TagListItem-sc-8b91p3-2 gkalwr">diary</span></div></footer></div></a></article></aside></div><footer class="Footer__FooterWrapper-sc-1l45ifs-0 eliZBG"><nav><div class="footer-col"><h3 class="footer-title">BAEKDEV<!-- --> © <!-- -->2021</h3><p class="footer-item-text">Built with<!-- --> <a class="footer-link" href="https://www.gatsbyjs.org">Gatsby</a>.</p><p class="footer-item-text">Hosted with<!-- --> <span class="footer-heart" role="img" aria-label="Love">❤</span> <!-- -->by<!-- --> <a class="footer-link" href="https://github.com/baekdev">GitHub</a>.</p></div><div class="footer-col"><h3 class="footer-title">Explore</h3><div class="footer-column-items"><span class="footer-item"><a class="footer-link" href="https://baek.dev">Blog</a></span></div></div><div class="footer-col"><h3 class="footer-title">Follow the author</h3><div class="footer-column-items"><span class="footer-item"><a class="footer-link" href="https://github.com/baekdev">GitHub</a></span><span class="footer-item"><a class="footer-link" href="https://baek.dev">Website</a></span><span class="footer-item"><a class="footer-link" href="https://twitter.com/_baekdev">Twitter</a></span></div></div></nav></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-148617191-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/13/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-1a9fb2898282dc480635.js"],"app":["/app-ea112bb96b755fba23d4.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-241020a1cf7d0f317bbe.js"],"component---src-pages-404-js":["/component---src-pages-404-js-2d2c3b518a875c914034.js"],"component---src-templates-blog-list-template-js":["/component---src-templates-blog-list-template-js-a1c37c77adb8430cb871.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-7fb162a244bb06c9bde9.js"],"component---src-templates-page-js":["/component---src-templates-page-js-2f4020339d8313b61d14.js"],"component---src-templates-tags-js":["/component---src-templates-tags-js-431abdc4b6bb94836e00.js"]};/*]]>*/</script><script src="/polyfill-1a9fb2898282dc480635.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-7fb162a244bb06c9bde9.js" async=""></script><script src="/6dae301c9709e8c5899acc3516b7dd8f43382179-f6f45e413d80a83ad07b.js" async=""></script><script src="/3a2f1ab89072400eb78a258db61265f1964eff8a-aef7f54ab15c1714b3e4.js" async=""></script><script src="/2852872c-13de6bfc70108ff62994.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-ea112bb96b755fba23d4.js" async=""></script><script src="/framework-9086242092609fce62cd.js" async=""></script><script src="/webpack-runtime-2bf8352bc6d866c679c5.js" async=""></script></body></html>